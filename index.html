<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      [data-lightning-out] {
        max-width: 68rem;
        padding-right: 15px;
        padding-left: 15px;
        margin: 0 auto !important;
      }
      .flex-ceter {
        display: flex;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <script src="https://wabco--qa.sandbox.my.site.com/MyDashboard/lightning/lightning.out.js"></script>
    <div data-lightning-out="true" class="flex-ceter">
      <img class="img" src="https://files.axshare.com/gsc/3H70BZ/10/e5/19/10e519d24d8240b2b96a830c924cf339/images/atoms/u559.svg?pageId=669ce77b-e451-4f7e-9fdd-2ef83835ce0f" alt="spinner">
    </div>
    <script>      
      const appName = 'c:zfPartnerLocationFinder';
      const componentName = 'c:zfPartnerLocationFinderMaster';
      const lightningEndpoint = 'https://wabco--qa.sandbox.my.site.com/MyDashboard';
      const targetElement = document.querySelector('[data-lightning-out]');

      const componentAttributes = {
        locale: 'en'
      };
    
      $Lightning.use(
        appName,
        function() {
          $Lightning.createComponent(
            componentName,
            componentAttributes,
            targetElement,
            function(cmp) {
              document.querySelector('.img').remove();
              addAllEventListeners();	
            }
          );
        },
        lightningEndpoint,
        'session-id'
      );
      
      function addAllEventListeners() {
        const cmp = document.querySelector('c-zf-partner-location-finder-master');
        
        cmp?.addEventListener('datalayerupdate', function(event) {
    			window.dataLayer = window.dataLayer || [];
    			window.dataLayer.push(event.detail);
        });
      }
    </script>
  </body>
</html>
